2025-11-12 22:38:05 - CPG_ImageGen - INFO - Using device: CUDA GPU: NVIDIA GeForce RTX 4070 Laptop GPU
2025-11-12 22:38:06 - CPG_ImageGen - INFO - Logger imported successfully
2025-11-12 22:38:06 - CPG_ImageGen - INFO - Importing methods...
2025-11-12 22:38:06 - CPG_ImageGen - INFO - Importing Method1ControlNetInpaint...
2025-11-12 22:38:06 - CPG_ImageGen - INFO -   - Importing ImageLoader...
2025-11-12 22:38:06 - CPG_ImageGen - INFO -   - Importing ForegroundExtractor...
2025-11-12 22:38:07 - CPG_ImageGen - INFO -   - Importing MaskProcessor...
2025-11-12 22:38:07 - CPG_ImageGen - INFO -   - Importing CompositingEngine...
2025-11-12 22:38:07 - CPG_ImageGen - INFO -   - Importing Visualizer...
2025-11-12 22:38:08 - CPG_ImageGen - INFO -   [OK] All modules imported
2025-11-12 22:38:08 - CPG_ImageGen - INFO -   - Importing NanoBananaAPI...
2025-11-12 22:38:08 - CPG_ImageGen - INFO -   - Importing ControlNetHandler...
2025-11-12 22:38:08 - CPG_ImageGen - INFO -   [OK] All models imported
2025-11-12 22:38:08 - CPG_ImageGen - INFO - [OK] Method1ControlNetInpaint imported
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Importing Method2NanoBananaComposite...
2025-11-12 22:38:08 - CPG_ImageGen - INFO - [OK] Method2NanoBananaComposite imported
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Methods imported successfully
2025-11-12 22:38:08 - CPG_ImageGen - INFO - === CPG Image Generator Starting ===
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Starting main function...
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Arguments parsed: Namespace(input='input/soda_can.HEIC', prompt=None, product=None, method=None, style=None, color=None, output=None, config='config/config.yaml', api_key=None, variations=1, no_enhance=False)
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Loading configuration...
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Configuration loaded from config/config.yaml
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Setting up directories...
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Directories setup complete
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Input image: input/soda_can.HEIC
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Prompt: AUTO-GENERATE
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Product: AUTO-DETECT
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Method: method1_controlnet
2025-11-12 22:38:08 - CPG_ImageGen - INFO -  Starting Method 1: Pure ControlNet Inpainting

2025-11-12 22:38:08 - CPG_ImageGen - INFO - ============================================================
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Initializing Method 1: Pure ControlNet Inpainting
2025-11-12 22:38:08 - CPG_ImageGen - INFO - ============================================================
2025-11-12 22:38:08 - CPG_ImageGen - INFO - ImageLoader initialized with support for all major formats
2025-11-12 22:38:08 - CPG_ImageGen - INFO - ForegroundExtractor initialized (model: u2net, will load on first use)
2025-11-12 22:38:08 - CPG_ImageGen - INFO - MaskProcessor initialized
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Visualizer initialized. Output: output\visualizations
2025-11-12 22:38:08 - CPG_ImageGen - INFO - ControlNetHandler initialized
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Base model: Qwen/Qwen-Image
2025-11-12 22:38:08 - CPG_ImageGen - INFO - ControlNet: InstantX/Qwen-Image-ControlNet-Inpainting
2025-11-12 22:38:08 - CPG_ImageGen - INFO - (Models will load on first use)
2025-11-12 22:38:08 - CPG_ImageGen - INFO - AutoPromptGenerator initialized (model will load on first use)
2025-11-12 22:38:08 - CPG_ImageGen - INFO - SmartPromptEnhancer created (will initialize on first use)
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Smart Prompt Enhancer enabled
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Method 1 initialized successfully
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Starting Method 1 generation for: input/soda_can.HEIC
2025-11-12 22:38:08 - CPG_ImageGen - INFO - [Stage 1/6] Loading image...
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Loading image: soda_can.HEIC (.heic)
2025-11-12 22:38:08 - CPG_ImageGen - DEBUG - Original image mode: RGB
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Resizing from 3024x4032 to 1536x2048
2025-11-12 22:38:08 - CPG_ImageGen - INFO - [Stage 2/6] Extracting foreground...
2025-11-12 22:38:08 - CPG_ImageGen - INFO - ============================================================
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Initializing rembg (Background Removal)
2025-11-12 22:38:08 - CPG_ImageGen - INFO - ============================================================
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Model: u2net
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Downloading model on first run (this may take a few minutes)...
2025-11-12 22:38:08 - CPG_ImageGen - INFO - Model will be cached at: ~/.u2net/
2025-11-12 22:38:09 - CPG_ImageGen - INFO - ============================================================
2025-11-12 22:38:09 - CPG_ImageGen - INFO - rembg initialized successfully!
2025-11-12 22:38:09 - CPG_ImageGen - INFO - ============================================================
2025-11-12 22:38:09 - CPG_ImageGen - INFO - Extracting foreground from image...
2025-11-12 22:38:09 - CPG_ImageGen - DEBUG - Using alpha matting for better edge quality
2025-11-12 22:38:11 - CPG_ImageGen - INFO - Foreground extraction complete
2025-11-12 22:38:11 - CPG_ImageGen - INFO - [Stage 3/6] Processing mask...
2025-11-12 22:38:11 - CPG_ImageGen - INFO - Processing mask for: for_inpainting
2025-11-12 22:38:11 - CPG_ImageGen - DEBUG - Mask expanded by 10 pixels
2025-11-12 22:38:11 - CPG_ImageGen - DEBUG - Mask feathered by 3 pixels
2025-11-12 22:38:11 - CPG_ImageGen - DEBUG - Inpainting mask prepared
2025-11-12 22:38:11 - CPG_ImageGen - INFO - [Stage 4/6] Auto-generating creative prompt...
2025-11-12 22:38:11 - CPG_ImageGen - INFO - Initializing Gemini for auto-prompt generation...
2025-11-12 22:38:11 - CPG_ImageGen - INFO - Gemini model initialized
2025-11-12 22:38:11 - CPG_ImageGen - INFO - Analyzing image to generate automatic prompts...
2025-11-12 22:38:18 - CPG_ImageGen - DEBUG - Gemini analysis: PRODUCT: The product is a slim aluminum beverage can of kombucha. It's a vibrant, matte yellow color, with purple/dark blue branding and text. The word "BORÉCHA" is printed vertically and prominently....
2025-11-12 22:38:18 - CPG_ImageGen - INFO - Auto-generated product: The product is a slim aluminum beverage can of kombucha. It'...
2025-11-12 22:38:18 - CPG_ImageGen - INFO - Auto-generated background: A vibrant, tropical vaporwave-inspired scene. Imagine a back...
2025-11-12 22:38:18 - CPG_ImageGen - INFO - No prompt provided - using auto-generated prompt
2025-11-12 22:38:18 - CPG_ImageGen - INFO - Final prompt: This photo showcases The product is a slim aluminum beverage can of kombucha. It's a vibrant, matte yellow color, with purple/dark blue branding and text. The word "BORÉCHA" is printed vertically and prominently. The can also features design elements like a stylized passion fruit graphic with green leaves. There are labels indicating the flavor "Hawaiian Passion Fruit," and health-conscious call-outs like "Low-Cal, Low Sugar, Probiotic Tea". The can has nutritional information at the bottom.. The product is clearly highlighted and prominently displayed, placed in A vibrant, tropical vaporwave-inspired scene. Imagine a backdrop of soft, gradient pastel colors (think sunset hues of pink, orange, and light yellow). Scatter holographic passion fruit slices and palm leaves around the can, giving it a slightly retro-futuristic feel. To add depth, place a miniature, glowing neon sign that says "Good Vibes Only" slightly out of focus in the background. The lighting should be soft but bright, emphasizing the can's matte texture and vibrant colors. A small, dripping ice cream cone is placed to the side of the can, also adding the aesthetic.. The overall image maintains a Retro-futuristic vaporwave with a touch of tropical kitsch. The overall aesthetic should be bright, playful, and visually stimulating, appealing to a Gen-Z audience with its blend of nostalgia and modernity. visual style, with professional commercial photography lighting and composition.
2025-11-12 22:38:18 - CPG_ImageGen - INFO - [Stage 5/6] Inpainting background with ControlNet...
2025-11-12 22:38:18 - CPG_ImageGen - INFO - ============================================================
2025-11-12 22:38:18 - CPG_ImageGen - INFO - Loading Qwen-Image ControlNet Pipeline
2025-11-12 22:38:18 - CPG_ImageGen - INFO - ============================================================
2025-11-12 22:38:18 - CPG_ImageGen - INFO - This will download ~10GB on first run...
2025-11-12 22:38:18 - CPG_ImageGen - INFO - Models cached at: ~/.cache/huggingface/hub/
2025-11-12 22:38:18 - CPG_ImageGen - INFO - Using torch.bfloat16 for GPU
2025-11-12 22:38:18 - CPG_ImageGen - INFO - [1/3] Importing diffusers classes...
2025-11-12 22:38:20 - CPG_ImageGen - ERROR - [ERROR] Model loading failed: Failed to import diffusers.models.controlnets.controlnet_qwenimage because of the following error (look up to see its traceback):
huggingface-hub>=0.34.0,<1.0 is required for a normal functioning of this module, but found huggingface-hub==1.1.2.
Try: `pip install transformers -U` or `pip install -e '.[dev]'` if you're working with git main
2025-11-12 22:38:20 - CPG_ImageGen - ERROR - Error in Method 1 generation: Failed to import diffusers.models.controlnets.controlnet_qwenimage because of the following error (look up to see its traceback):
huggingface-hub>=0.34.0,<1.0 is required for a normal functioning of this module, but found huggingface-hub==1.1.2.
Try: `pip install transformers -U` or `pip install -e '.[dev]'` if you're working with git main
2025-11-12 22:38:20 - CPG_ImageGen - ERROR - Fatal error in main: Failed to import diffusers.models.controlnets.controlnet_qwenimage because of the following error (look up to see its traceback):
huggingface-hub>=0.34.0,<1.0 is required for a normal functioning of this module, but found huggingface-hub==1.1.2.
Try: `pip install transformers -U` or `pip install -e '.[dev]'` if you're working with git main
2025-11-12 22:38:20 - CPG_ImageGen - INFO - === CPG Image Generator Finished ===
