2025-11-12 22:43:49 - CPG_ImageGen - INFO - Using device: CUDA GPU: NVIDIA GeForce RTX 4070 Laptop GPU
2025-11-12 22:43:50 - CPG_ImageGen - INFO - Logger imported successfully
2025-11-12 22:43:50 - CPG_ImageGen - INFO - Importing methods...
2025-11-12 22:43:50 - CPG_ImageGen - INFO - Importing Method1ControlNetInpaint...
2025-11-12 22:43:50 - CPG_ImageGen - INFO -   - Importing ImageLoader...
2025-11-12 22:43:50 - CPG_ImageGen - INFO -   - Importing ForegroundExtractor...
2025-11-12 22:43:51 - CPG_ImageGen - INFO -   - Importing MaskProcessor...
2025-11-12 22:43:51 - CPG_ImageGen - INFO -   - Importing CompositingEngine...
2025-11-12 22:43:51 - CPG_ImageGen - INFO -   - Importing Visualizer...
2025-11-12 22:43:51 - CPG_ImageGen - INFO -   [OK] All modules imported
2025-11-12 22:43:51 - CPG_ImageGen - INFO -   - Importing NanoBananaAPI...
2025-11-12 22:43:51 - CPG_ImageGen - INFO -   - Importing ControlNetHandler...
2025-11-12 22:43:51 - CPG_ImageGen - INFO -   [OK] All models imported
2025-11-12 22:43:51 - CPG_ImageGen - INFO - [OK] Method1ControlNetInpaint imported
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Importing Method2NanoBananaComposite...
2025-11-12 22:43:51 - CPG_ImageGen - INFO - [OK] Method2NanoBananaComposite imported
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Methods imported successfully
2025-11-12 22:43:51 - CPG_ImageGen - INFO - === CPG Image Generator Starting ===
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Starting main function...
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Arguments parsed: Namespace(input='input/soda_can.HEIC', prompt=None, product=None, method=None, style=None, color=None, output=None, config='config/config.yaml', api_key=None, variations=1, no_enhance=False)
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Loading configuration...
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Configuration loaded from config/config.yaml
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Setting up directories...
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Directories setup complete
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Input image: input/soda_can.HEIC
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Prompt: AUTO-GENERATE
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Product: AUTO-DETECT
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Method: method1_controlnet
2025-11-12 22:43:51 - CPG_ImageGen - INFO -  Starting Method 1: Pure ControlNet Inpainting

2025-11-12 22:43:51 - CPG_ImageGen - INFO - ============================================================
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Initializing Method 1: Pure ControlNet Inpainting
2025-11-12 22:43:51 - CPG_ImageGen - INFO - ============================================================
2025-11-12 22:43:51 - CPG_ImageGen - INFO - ImageLoader initialized with support for all major formats
2025-11-12 22:43:51 - CPG_ImageGen - INFO - ForegroundExtractor initialized (model: u2net, will load on first use)
2025-11-12 22:43:51 - CPG_ImageGen - INFO - MaskProcessor initialized
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Visualizer initialized. Output: output\visualizations
2025-11-12 22:43:51 - CPG_ImageGen - INFO - ControlNetHandler initialized
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Base model: Qwen/Qwen-Image
2025-11-12 22:43:51 - CPG_ImageGen - INFO - ControlNet: InstantX/Qwen-Image-ControlNet-Inpainting
2025-11-12 22:43:51 - CPG_ImageGen - INFO - (Models will load on first use)
2025-11-12 22:43:51 - CPG_ImageGen - INFO - AutoPromptGenerator initialized (model will load on first use)
2025-11-12 22:43:51 - CPG_ImageGen - INFO - SmartPromptEnhancer created (will initialize on first use)
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Smart Prompt Enhancer enabled
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Method 1 initialized successfully
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Starting Method 1 generation for: input/soda_can.HEIC
2025-11-12 22:43:51 - CPG_ImageGen - INFO - [Stage 1/6] Loading image...
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Loading image: soda_can.HEIC (.heic)
2025-11-12 22:43:51 - CPG_ImageGen - DEBUG - Original image mode: RGB
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Resizing from 3024x4032 to 1536x2048
2025-11-12 22:43:51 - CPG_ImageGen - INFO - [Stage 2/6] Extracting foreground...
2025-11-12 22:43:51 - CPG_ImageGen - INFO - ============================================================
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Initializing rembg (Background Removal)
2025-11-12 22:43:51 - CPG_ImageGen - INFO - ============================================================
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Model: u2net
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Downloading model on first run (this may take a few minutes)...
2025-11-12 22:43:51 - CPG_ImageGen - INFO - Model will be cached at: ~/.u2net/
2025-11-12 22:43:52 - CPG_ImageGen - INFO - ============================================================
2025-11-12 22:43:52 - CPG_ImageGen - INFO - rembg initialized successfully!
2025-11-12 22:43:52 - CPG_ImageGen - INFO - ============================================================
2025-11-12 22:43:52 - CPG_ImageGen - INFO - Extracting foreground from image...
2025-11-12 22:43:52 - CPG_ImageGen - DEBUG - Using alpha matting for better edge quality
2025-11-12 22:43:54 - CPG_ImageGen - INFO - Foreground extraction complete
2025-11-12 22:43:54 - CPG_ImageGen - INFO - [Stage 3/6] Processing mask...
2025-11-12 22:43:54 - CPG_ImageGen - INFO - Processing mask for: for_inpainting
2025-11-12 22:43:54 - CPG_ImageGen - DEBUG - Mask expanded by 10 pixels
2025-11-12 22:43:54 - CPG_ImageGen - DEBUG - Mask feathered by 3 pixels
2025-11-12 22:43:54 - CPG_ImageGen - DEBUG - Inpainting mask prepared
2025-11-12 22:43:54 - CPG_ImageGen - INFO - [Stage 4/6] Auto-generating creative prompt...
2025-11-12 22:43:54 - CPG_ImageGen - INFO - Initializing Gemini for auto-prompt generation...
2025-11-12 22:43:54 - CPG_ImageGen - INFO - Gemini model initialized
2025-11-12 22:43:54 - CPG_ImageGen - INFO - Analyzing image to generate automatic prompts...
2025-11-12 22:44:02 - CPG_ImageGen - DEBUG - Gemini analysis: PRODUCT: This is a beverage can of Kombucha. The can is cylindrical and the primary color is bright yellow. The branding elements including the name "BORÉCHA" are in purple, written vertically down th...
2025-11-12 22:44:02 - CPG_ImageGen - INFO - Auto-generated product: This is a beverage can of Kombucha. The can is cylindrical a...
2025-11-12 22:44:02 - CPG_ImageGen - INFO - Auto-generated background: A bright, maximalist, tropical beach bar scene.

*   **Scene...
2025-11-12 22:44:02 - CPG_ImageGen - INFO - No prompt provided - using auto-generated prompt
2025-11-12 22:44:02 - CPG_ImageGen - INFO - Final prompt: This photo showcases This is a beverage can of Kombucha. The can is cylindrical and the primary color is bright yellow. The branding elements including the name "BORÉCHA" are in purple, written vertically down the side. There's an image of a passion fruit with green leaves above it. The text "HAWAIIAN PASSION FRUIT" is also in purple, placed horizontally. There is additional text in smaller font near the bottom indicating benefits such as "Low-Cal", "Low Sugar" and "Probiotic Tea". The can has key feature highlights like sugar & calorie content, and that it's a "Gut Booster".. The product is clearly highlighted and prominently displayed, placed in A bright, maximalist, tropical beach bar scene.

*   **Scene:** Think over-the-top vibrant. Imagine a small section of a beach bar, close up. A flamingo pink-painted bar top with textured grooves and glossy resin finish. The bar is littered with faux tropical flowers (bright pink hibiscus, yellow plumeria) in miniature ceramic pots shaped like smiley faces. A few novelty cocktail umbrellas in neon colors (orange, lime green) are scattered about. A light blue retro cooler with stickers of surf brands can be partially seen behind the can of Kombucha.
*   **Lighting:** Bright, direct sunlight mimicking the intensity of a tropical noon. A slight lens flare is acceptable to add to the summer vibe.
*   **Atmosphere:** Energetic, playful, slightly chaotic, but still clean and focused. The overall impression should be a mix of carefree summer fun and a tongue-in-cheek embracing of the artificiality of the scene.. The overall image maintains a Vibrant, maximalist, tongue-in-cheek, playful, retro-tropical. visual style, with professional commercial photography lighting and composition.
2025-11-12 22:44:02 - CPG_ImageGen - INFO - [Stage 5/6] Inpainting background with ControlNet...
2025-11-12 22:44:02 - CPG_ImageGen - INFO - ============================================================
2025-11-12 22:44:02 - CPG_ImageGen - INFO - Loading Qwen-Image ControlNet Pipeline
2025-11-12 22:44:02 - CPG_ImageGen - INFO - ============================================================
2025-11-12 22:44:02 - CPG_ImageGen - INFO - This will download ~10GB on first run...
2025-11-12 22:44:02 - CPG_ImageGen - INFO - Models cached at: ~/.cache/huggingface/hub/
2025-11-12 22:44:02 - CPG_ImageGen - INFO - Using torch.bfloat16 for GPU
2025-11-12 22:44:02 - CPG_ImageGen - INFO - [1/3] Importing diffusers classes...
2025-11-12 22:44:05 - CPG_ImageGen - INFO -   [OK] Classes imported
2025-11-12 22:44:05 - CPG_ImageGen - INFO - [2/3] Loading ControlNet: InstantX/Qwen-Image-ControlNet-Inpainting
